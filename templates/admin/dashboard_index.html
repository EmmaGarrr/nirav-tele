{# your_project/templates/admin/dashboard_index.html #}
{% extends 'admin/master.html' %}

{% block page_body %}
  {# Your dashboard title area - keeping it as you had it #}
  <h1>Admin Dashboard</h1>
  <p class="lead">Welcome to the Storage Admin Panel!</p>
  <hr>

  {% if error_message %}
    <div class="alert alert-danger">Error loading dashboard data: {{ error_message }}</div>
  {% endif %}

  {# --- Row 1: General Stats --- #}
  <div class="row mb-4">
    <div class="col-md-6 mb-4 mb-md-0">
      <div class="card text-white h-100 gradient-stat-card gradient-color-1"> {# APPLIED NEW CLASSES #}
        <div class="card-header">Total Users</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ user_count if user_count is not none else 'N/A' }}</h4>
          <p class="card-text">Registered users in the system.</p>
          <a href="{{ url_for('users.index') }}" class="btn btn-stat-card mt-auto">Manage All Users »</a>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card text-white h-100 gradient-stat-card gradient-color-2"> {# APPLIED NEW CLASSES #}
        <div class="card-header">Total File/Batch Records</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ file_record_count if file_record_count is not none else 'N/A' }}</h4>
          <p class="card-text">Uploaded file/batch metadata records.</p>
          <a href="{{ url_for('files.index') }}" class="btn btn-stat-card mt-auto">Manage All Files »</a>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-5 mb-3">Premium Users & Files</h4>
  <div class="row mb-4">
    <div class="col-md-6 mb-4 mb-md-0">
      <div class="card text-white h-100 gradient-stat-card gradient-color-3"> {# APPLIED NEW CLASSES, removed bg-success #}
        <div class="card-header">Premium Users</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ premium_user_count if premium_user_count is not none else 'N/A' }}</h4>
          <p class="card-text">Total active premium users.</p>
          <a href="{{ url_for('users.index', role='Premium User') }}" class="btn btn-stat-card mt-auto">View Premium Users »</a>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card text-white h-100 gradient-stat-card gradient-color-4"> {# APPLIED NEW CLASSES, removed bg-light, ensured text-white #}
        <div class="card-header">Files by Premium Users</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ premium_user_file_count if premium_user_file_count is not none else 'N/A' }}</h4>
          <p class="card-text">Total files uploaded by premium users.</p>
          <a href="{{ url_for('files.index', user_type='Premium') }}" class="btn btn-stat-card mt-auto">View Premium Files »</a>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-4 mb-3">Free Users & Files</h4>
  <div class="row mb-4">
    <div class="col-md-6 mb-4 mb-md-0">
      <div class="card text-white h-100 gradient-stat-card gradient-color-5"> {# APPLIED NEW CLASSES, removed bg-info #}
        <div class="card-header">Free Users</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ free_user_count if free_user_count is not none else 'N/A' }}</h4>
          <p class="card-text">Total active free users.</p>
          <a href="{{ url_for('users.index', role='Free User') }}" class="btn btn-stat-card mt-auto">View Free Users »</a>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card text-white h-100 gradient-stat-card gradient-color-6"> {# APPLIED NEW CLASSES, removed bg-light, ensured text-white #}
        <div class="card-header">Files by Free Users</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ free_user_file_count if free_user_file_count is not none else 'N/A' }}</h4>
          <p class="card-text">Total files uploaded by free users.</p>
          <a href="{{ url_for('files.index', user_type='Free') }}" class="btn btn-stat-card mt-auto">View Free Files »</a>
        </div>
      </div>
    </div>
  </div>

  <h4 class="mt-4 mb-3">Anonymous Uploads</h4>
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="card text-white h-100 gradient-stat-card gradient-color-7"> {# APPLIED NEW CLASSES, removed bg-warning #}
        <div class="card-header">Files by Anonymous Users</div>
        <div class="card-body d-flex flex-column">
          <h4 class="card-title">{{ anonymous_file_count if anonymous_file_count is not none else 'N/A' }}</h4>
          <p class="card-text">Total files uploaded anonymously.</p>
          <a href="{{ url_for('files.index', user_type='Anonymous') }}" class="btn btn-stat-card mt-auto">View Anonymous Files »</a>
        </div>
      </div>
    </div>
    <div class="col-md-6">
        {# Empty column or space for another card #}
    </div>
  </div>
{% endblock page_body %}