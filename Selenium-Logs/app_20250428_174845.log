2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - ============================================================
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250428_174845.log
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425', '-1002614397019', '-4641852757']
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Chunk Size: 20971520 bytes
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Max Upload Workers: 5
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - ============================================================
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Utility functions defined.
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-04-28 17:48:45,424 - INFO - [MainThread] [<module>] - Global state variables initialized.
2025-04-28 17:48:45,880 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-04-28 17:48:45,880 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-04-28 17:48:45,896 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-04-28 17:48:45,896 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-04-28 17:48:45,925 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-04-28 17:48:45,925 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-04-28 17:48:51,038 - INFO - [Thread-3 (process_request_thread)] [index] - Serving index page.
2025-04-28 17:48:51,057 - INFO - [Thread-3 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:48:51] "GET / HTTP/1.1" 200 -
2025-04-28 17:48:54,810 - INFO - [Thread-2 (process_request_thread)] [list_user_files] - List files request for: 'ELENA'
2025-04-28 17:48:54,823 - INFO - [Thread-2 (process_request_thread)] [load_metadata] - Successfully loaded metadata from 'metadata.json'.
2025-04-28 17:48:54,824 - INFO - [Thread-2 (process_request_thread)] [list_user_files] - Found 1 records for 'ELENA'.
2025-04-28 17:48:54,825 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:48:54] "GET /files/ELENA HTTP/1.1" 200 -
2025-04-28 17:48:56,163 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:48:56] "[33mGET /prepare-download/ELENA/download_page.html HTTP/1.1[0m" 404 -
2025-04-28 17:48:58,037 - INFO - [Thread-5 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:48:58] "[33mGET /prepare-download/ELENA/download_page.html HTTP/1.1[0m" 404 -
2025-04-28 17:49:10,745 - INFO - [Thread-6 (process_request_thread)] [list_user_files] - List files request for: 'siren'
2025-04-28 17:49:10,745 - INFO - [Thread-6 (process_request_thread)] [load_metadata] - Successfully loaded metadata from 'metadata.json'.
2025-04-28 17:49:10,745 - INFO - [Thread-6 (process_request_thread)] [list_user_files] - Found 11 records for 'siren'.
2025-04-28 17:49:10,745 - INFO - [Thread-6 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:10] "GET /files/siren HTTP/1.1" 200 -
2025-04-28 17:49:12,417 - INFO - [Thread-7 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:12] "[33mGET /prepare-download/siren/Telegram_app.py HTTP/1.1[0m" 404 -
2025-04-28 17:49:13,004 - INFO - [Thread-8 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:13] "[33mGET /prepare-download/siren/Telegram_app.py HTTP/1.1[0m" 404 -
2025-04-28 17:49:13,198 - INFO - [Thread-9 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:13] "[33mGET /prepare-download/siren/Telegram_app.py HTTP/1.1[0m" 404 -
2025-04-28 17:49:13,362 - INFO - [Thread-10 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:13] "[33mGET /prepare-download/siren/Telegram_app.py HTTP/1.1[0m" 404 -
2025-04-28 17:49:18,039 - INFO - [Thread-11 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-04-28 17:49:18,039 - INFO - [Thread-11 (process_request_thread)] [initiate_upload] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Temp storage: uploads_temp\e21032aa-62db-4d10-bbd2-b5b0d10e38ea_404_error.html
2025-04-28 17:49:18,039 - INFO - [Thread-11 (process_request_thread)] [initiate_upload] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Temp saved: '404_error.html'.
2025-04-28 17:49:18,039 - INFO - [Thread-11 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:18] "POST /initiate-upload HTTP/1.1" 200 -
2025-04-28 17:49:18,039 - INFO - [Thread-12 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: e21032aa-62db-4d10-bbd2-b5b0d10e38ea
2025-04-28 17:49:18,039 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Starting processing generator...
2025-04-28 17:49:18,050 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Processing: User='ELENA', File='404_error.html'
2025-04-28 17:49:18,050 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Initialized Upload Executor (max=5)
2025-04-28 17:49:18,051 - INFO - [Thread-12 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:18] "GET /stream-progress/e21032aa-62db-4d10-bbd2-b5b0d10e38ea HTTP/1.1" 200 -
2025-04-28 17:49:18,053 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Access ID: 00693c497d
2025-04-28 17:49:18,055 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Single file workflow.
2025-04-28 17:49:18,058 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Compressed size: 917
2025-04-28 17:49:18,058 - INFO - [Upload_e210_0] [_send_single_file_task] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] T> Sending '404_error.zip' to -4603853425
2025-04-28 17:49:18,058 - INFO - [Upload_e210_0] [send_file_to_telegram] - [ChatID -4603853425, File '404_error.zip'] Attempting send.
2025-04-28 17:49:18,058 - INFO - [Upload_e210_1] [_send_single_file_task] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] T> Sending '404_error.zip' to -1002614397019
2025-04-28 17:49:18,066 - INFO - [Upload_e210_2] [_send_single_file_task] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] T> Sending '404_error.zip' to -4641852757
2025-04-28 17:49:18,066 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Submitted 3 single-file tasks.
2025-04-28 17:49:18,066 - INFO - [Upload_e210_1] [send_file_to_telegram] - [ChatID -1002614397019, File '404_error.zip'] Attempting send.
2025-04-28 17:49:18,067 - INFO - [Upload_e210_2] [send_file_to_telegram] - [ChatID -4641852757, File '404_error.zip'] Attempting send.
2025-04-28 17:49:18,067 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Wait primary (-4603853425)...
2025-04-28 17:49:18,506 - ERROR - [Upload_e210_1] [send_file_to_telegram] - [ChatID -1002614397019, File '404_error.zip'] Network/Request Error (Attempt 1): 400 Client Error: Bad Request for url: https://api.telegram.org/bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument | Status: 400 | Response: {"ok":false,"error_code":400,"description":"Bad Request: file must be non-empty"}
Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\telegram_api.py", line 66, in send_file_to_telegram
    response.raise_for_status() # Check for HTTP 4xx/5xx errors
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.telegram.org/bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument
2025-04-28 17:49:18,510 - ERROR - [Upload_e210_2] [send_file_to_telegram] - [ChatID -4641852757, File '404_error.zip'] Network/Request Error (Attempt 1): 400 Client Error: Bad Request for url: https://api.telegram.org/bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument | Status: 400 | Response: {"ok":false,"error_code":400,"description":"Bad Request: file must be non-empty"}
Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\telegram_api.py", line 66, in send_file_to_telegram
    response.raise_for_status() # Check for HTTP 4xx/5xx errors
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.telegram.org/bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument
2025-04-28 17:49:18,513 - INFO - [Upload_e210_1] [_send_single_file_task] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] T> Sent '404_error.zip' to -1002614397019. Success: False
2025-04-28 17:49:18,515 - INFO - [Upload_e210_2] [_send_single_file_task] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] T> Sent '404_error.zip' to -4641852757. Success: False
2025-04-28 17:49:18,901 - INFO - [Upload_e210_0] [send_file_to_telegram] - [ChatID -4603853425, File '404_error.zip'] API success (Attempt 1).
2025-04-28 17:49:18,902 - INFO - [Upload_e210_0] [_send_single_file_task] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] T> Sent '404_error.zip' to -4603853425. Success: True
2025-04-28 17:49:18,904 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Primary done. OK:True
2025-04-28 17:49:18,904 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Wait backups...
2025-04-28 17:49:18,906 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Single sends done in 0.85s.
2025-04-28 17:49:18,906 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Success: 1/3
2025-04-28 17:49:18,911 - INFO - [Thread-12 (process_request_thread)] [load_metadata] - Successfully loaded metadata from 'metadata.json'.
2025-04-28 17:49:18,920 - INFO - [Thread-12 (process_request_thread)] [save_metadata] - Successfully saved metadata to 'metadata.json'.
2025-04-28 17:49:18,922 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Upload generator cleanup.
2025-04-28 17:49:18,924 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Upload executor shutdown.
2025-04-28 17:49:18,925 - INFO - [Thread-12 (process_request_thread)] [_safe_remove_file] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Cleaned up original temp: uploads_temp\e21032aa-62db-4d10-bbd2-b5b0d10e38ea_404_error.html
2025-04-28 17:49:18,926 - INFO - [Thread-12 (process_request_thread)] [process_upload_and_generate_updates] - [e21032aa-62db-4d10-bbd2-b5b0d10e38ea] Upload generator finished. Status: completed
2025-04-28 17:49:21,957 - INFO - [Thread-13 (process_request_thread)] [get_file_by_access_id] - Request dl page via access_id: 00693c497d
2025-04-28 17:49:21,988 - INFO - [Thread-13 (process_request_thread)] [load_metadata] - Successfully loaded metadata from 'metadata.json'.
2025-04-28 17:49:21,989 - INFO - [Thread-13 (process_request_thread)] [get_file_by_access_id] - Rendering dl page for '404_error.html' (id: 00693c497d).
2025-04-28 17:49:21,994 - INFO - [Thread-13 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:21] "GET /get/00693c497d HTTP/1.1" 200 -
2025-04-28 17:49:23,657 - INFO - [Thread-14 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:23] "[33mGET /stream-download/00693c497d HTTP/1.1[0m" 404 -
2025-04-28 17:49:24,206 - INFO - [Thread-15 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:24] "[33mGET /stream-download/00693c497d HTTP/1.1[0m" 404 -
2025-04-28 17:49:24,619 - INFO - [Thread-16 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:24] "[33mGET /stream-download/00693c497d HTTP/1.1[0m" 404 -
2025-04-28 17:49:24,829 - INFO - [Thread-17 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:24] "[33mGET /stream-download/00693c497d HTTP/1.1[0m" 404 -
2025-04-28 17:49:25,013 - INFO - [Thread-18 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:25] "[33mGET /stream-download/00693c497d HTTP/1.1[0m" 404 -
2025-04-28 17:49:25,180 - INFO - [Thread-19 (process_request_thread)] [_log] - 127.0.0.1 - - [28/Apr/2025 17:49:25] "[33mGET /stream-download/00693c497d HTTP/1.1[0m" 404 -
2025-04-28 17:55:31,337 - INFO - [MainThread] [_log] -  * Detected change in 'E:\\Telegram_tool\\Telegram_Bot_Tool\\routes.py', reloading
