2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - ============================================================
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250505_151824.log
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425', '-1002614397019', '-4641852757']
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - Chunk Size: 20.0 MB (20971520 bytes)
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - Max Upload Workers: 5
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - ============================================================
2025-05-05 15:18:24,571 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-05-05 15:18:24,594 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-05 15:18:24,594 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: *
2025-05-05 15:18:24,594 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-05 15:18:24,594 - INFO - [MainThread] [<module>] - Flask-Login initialized.
2025-05-05 15:18:24,594 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-05 15:18:24,603 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-05 15:18:24,604 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: *
2025-05-05 15:18:24,604 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-05 15:18:24,605 - INFO - [MainThread] [<module>] - Flask-Login initialized.
2025-05-05 15:18:24,605 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-05 15:18:24,735 - INFO - [MainThread] [<module>] - Database module initialized.
2025-05-05 15:18:25,219 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-05-05 15:18:25,219 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-05-05 15:18:25,225 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-05-05 15:18:25,227 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-05-05 15:18:25,239 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-05-05 15:18:25,246 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-05-05 15:18:43,941 - INFO - [Thread-3 (process_request_thread)] [index] - Serving index page.
2025-05-05 15:18:44,005 - INFO - [Thread-3 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.6armfs2.mongodb.net...
2025-05-05 15:18:46,248 - INFO - [Thread-3 (process_request_thread)] [_connect_to_db] - âœ… Successfully connected and pinged MongoDB Atlas!
2025-05-05 15:18:46,248 - INFO - [Thread-3 (process_request_thread)] [get_db] - Accessed database: Telegrambot
2025-05-05 15:18:46,263 - INFO - [Thread-3 (process_request_thread)] [get_userinfo_collection] - Accessed collection: userinfo
2025-05-05 15:18:46,296 - INFO - [Thread-3 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:18:46] "GET / HTTP/1.1" 200 -
2025-05-05 15:18:46,354 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:18:46] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-05-05 15:18:56,132 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-05 15:18:56,172 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - Upload initiated by user: tes23@gmail.com
2025-05-05 15:18:56,172 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Temp storage: uploads_temp\6ff811bf-3d07-4af3-8355-426fbd31bb94_download_page.html
2025-05-05 15:18:56,173 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Temp saved: 'download_page.html'.
2025-05-05 15:18:56,174 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:18:56] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-05 15:18:56,183 - INFO - [Thread-5 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 6ff811bf-3d07-4af3-8355-426fbd31bb94
2025-05-05 15:18:56,184 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Starting processing generator...
2025-05-05 15:18:56,185 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Processing: User='testt', File='download_page.html'
2025-05-05 15:18:56,187 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Initialized Upload Executor (max=5)
2025-05-05 15:18:56,187 - INFO - [Thread-5 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:18:56] "GET /stream-progress/6ff811bf-3d07-4af3-8355-426fbd31bb94 HTTP/1.1" 200 -
2025-05-05 15:18:56,187 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Access ID: 82d5f5678e
2025-05-05 15:18:56,189 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Single file workflow.
2025-05-05 15:18:56,243 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Compressed size: 4401
2025-05-05 15:18:56,265 - INFO - [Upload_6ff8_0] [_send_single_file_task] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] T> Sending 'download_page.zip' (4401b) to -4603853425
2025-05-05 15:18:56,265 - INFO - [Upload_6ff8_0] [send_file_to_telegram] - [ChatID -4603853425, File 'download_page.zip'] Attempting send.
2025-05-05 15:18:56,265 - INFO - [Upload_6ff8_1] [_send_single_file_task] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] T> Sending 'download_page.zip' (4401b) to -1002614397019
2025-05-05 15:18:56,265 - INFO - [Upload_6ff8_2] [_send_single_file_task] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] T> Sending 'download_page.zip' (4401b) to -4641852757
2025-05-05 15:18:56,265 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Submitted 3 single-file tasks.
2025-05-05 15:18:56,265 - INFO - [Upload_6ff8_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'download_page.zip'] Attempting send.
2025-05-05 15:18:56,265 - INFO - [Upload_6ff8_2] [send_file_to_telegram] - [ChatID -4641852757, File 'download_page.zip'] Attempting send.
2025-05-05 15:18:56,293 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Wait primary (-4603853425)...
2025-05-05 15:18:57,293 - INFO - [Upload_6ff8_2] [send_file_to_telegram] - [ChatID -4641852757, File 'download_page.zip'] API success (Attempt 1).
2025-05-05 15:18:57,296 - INFO - [Upload_6ff8_2] [_send_single_file_task] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] T> Sent 'download_page.zip' to -4641852757. Success: True
2025-05-05 15:18:57,301 - INFO - [Upload_6ff8_0] [send_file_to_telegram] - [ChatID -4603853425, File 'download_page.zip'] API success (Attempt 1).
2025-05-05 15:18:57,304 - INFO - [Upload_6ff8_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'download_page.zip'] API success (Attempt 1).
2025-05-05 15:18:57,304 - INFO - [Upload_6ff8_0] [_send_single_file_task] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] T> Sent 'download_page.zip' to -4603853425. Success: True
2025-05-05 15:18:57,305 - INFO - [Upload_6ff8_1] [_send_single_file_task] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] T> Sent 'download_page.zip' to -1002614397019. Success: True
2025-05-05 15:18:57,306 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Primary done. OK:True
2025-05-05 15:18:57,307 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Wait backups...
2025-05-05 15:18:57,310 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Single sends done in 1.06s.
2025-05-05 15:18:57,311 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Success: 3/3
2025-05-05 15:18:57,312 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Attempting to save metadata to DB...
2025-05-05 15:18:57,313 - INFO - [Thread-5 (process_request_thread)] [get_metadata_collection] - Accessed collection: user_files
2025-05-05 15:18:57,352 - INFO - [Thread-5 (process_request_thread)] [save_file_metadata] - Successfully inserted metadata for access_id: 82d5f5678e
2025-05-05 15:18:57,354 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Metadata successfully saved to DB. Msg: Metadata inserted (ID: 681889891969d4a304aed135).
2025-05-05 15:18:57,355 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Upload generator cleanup.
2025-05-05 15:18:57,357 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Upload executor shutdown.
2025-05-05 15:18:57,358 - INFO - [Thread-5 (process_request_thread)] [_safe_remove_file] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Cleaned up original temp: uploads_temp\6ff811bf-3d07-4af3-8355-426fbd31bb94_download_page.html
2025-05-05 15:18:57,359 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [6ff811bf-3d07-4af3-8355-426fbd31bb94] Upload generator finished. Status: completed
2025-05-05 15:19:07,828 - INFO - [Thread-6 (process_request_thread)] [_log] - 192.168.1.20 - - [05/May/2025 15:19:07] "[31m[1mOPTIONS /api/auth/login HTTP/1.1[0m" 405 -
2025-05-05 15:19:17,156 - INFO - [Thread-7 (process_request_thread)] [index] - Serving index page.
2025-05-05 15:19:17,178 - INFO - [Thread-7 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:19:17] "GET / HTTP/1.1" 200 -
2025-05-05 15:19:23,801 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-05 15:19:23,832 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - Upload initiated by user: tes23@gmail.com
2025-05-05 15:19:23,833 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Temp storage: uploads_temp\3817bfd6-07d1-4ca8-8b6c-7ed66a766418_database.py
2025-05-05 15:19:23,834 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Temp saved: 'database.py'.
2025-05-05 15:19:23,834 - INFO - [Thread-8 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:19:23] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-05 15:19:23,838 - INFO - [Thread-9 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 3817bfd6-07d1-4ca8-8b6c-7ed66a766418
2025-05-05 15:19:23,838 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Starting processing generator...
2025-05-05 15:19:23,838 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Processing: User='testt', File='database.py'
2025-05-05 15:19:23,842 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Initialized Upload Executor (max=5)
2025-05-05 15:19:23,842 - INFO - [Thread-9 (process_request_thread)] [_log] - 127.0.0.1 - - [05/May/2025 15:19:23] "GET /stream-progress/3817bfd6-07d1-4ca8-8b6c-7ed66a766418 HTTP/1.1" 200 -
2025-05-05 15:19:23,843 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Access ID: cace27f68c
2025-05-05 15:19:23,844 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Single file workflow.
2025-05-05 15:19:23,867 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Compressed size: 4518
2025-05-05 15:19:23,869 - INFO - [Upload_3817_0] [_send_single_file_task] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] T> Sending 'database.zip' (4518b) to -4603853425
2025-05-05 15:19:23,869 - INFO - [Upload_3817_0] [send_file_to_telegram] - [ChatID -4603853425, File 'database.zip'] Attempting send.
2025-05-05 15:19:23,870 - INFO - [Upload_3817_1] [_send_single_file_task] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] T> Sending 'database.zip' (4518b) to -1002614397019
2025-05-05 15:19:23,871 - INFO - [Upload_3817_2] [_send_single_file_task] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] T> Sending 'database.zip' (4518b) to -4641852757
2025-05-05 15:19:23,872 - INFO - [Upload_3817_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'database.zip'] Attempting send.
2025-05-05 15:19:23,872 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Submitted 3 single-file tasks.
2025-05-05 15:19:23,872 - INFO - [Upload_3817_2] [send_file_to_telegram] - [ChatID -4641852757, File 'database.zip'] Attempting send.
2025-05-05 15:19:23,874 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Wait primary (-4603853425)...
2025-05-05 15:19:24,364 - INFO - [Upload_3817_2] [send_file_to_telegram] - [ChatID -4641852757, File 'database.zip'] API success (Attempt 1).
2025-05-05 15:19:24,364 - INFO - [Upload_3817_2] [_send_single_file_task] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] T> Sent 'database.zip' to -4641852757. Success: True
2025-05-05 15:19:24,395 - INFO - [Upload_3817_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'database.zip'] API success (Attempt 1).
2025-05-05 15:19:24,396 - INFO - [Upload_3817_1] [_send_single_file_task] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] T> Sent 'database.zip' to -1002614397019. Success: True
2025-05-05 15:19:24,563 - INFO - [Upload_3817_0] [send_file_to_telegram] - [ChatID -4603853425, File 'database.zip'] API success (Attempt 1).
2025-05-05 15:19:24,563 - INFO - [Upload_3817_0] [_send_single_file_task] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] T> Sent 'database.zip' to -4603853425. Success: True
2025-05-05 15:19:24,563 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Primary done. OK:True
2025-05-05 15:19:24,563 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Wait backups...
2025-05-05 15:19:24,563 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Single sends done in 0.70s.
2025-05-05 15:19:24,563 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Success: 3/3
2025-05-05 15:19:24,563 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Attempting to save metadata to DB...
2025-05-05 15:19:24,602 - INFO - [Thread-9 (process_request_thread)] [save_file_metadata] - Successfully inserted metadata for access_id: cace27f68c
2025-05-05 15:19:24,603 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Metadata successfully saved to DB. Msg: Metadata inserted (ID: 681889a51969d4a304aed136).
2025-05-05 15:19:24,604 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Upload generator cleanup.
2025-05-05 15:19:24,605 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Upload executor shutdown.
2025-05-05 15:19:24,606 - INFO - [Thread-9 (process_request_thread)] [_safe_remove_file] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Cleaned up original temp: uploads_temp\3817bfd6-07d1-4ca8-8b6c-7ed66a766418_database.py
2025-05-05 15:19:24,606 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3817bfd6-07d1-4ca8-8b6c-7ed66a766418] Upload generator finished. Status: completed
2025-05-05 15:19:39,519 - INFO - [Thread-10 (process_request_thread)] [_log] - 192.168.1.20 - - [05/May/2025 15:19:39] "OPTIONS /register HTTP/1.1" 200 -
2025-05-05 15:20:07,986 - INFO - [MainThread] [_log] -  * Detected change in 'E:\\Telegram_tool\\Telegram_Bot_Tool\\app_setup.py', reloading
