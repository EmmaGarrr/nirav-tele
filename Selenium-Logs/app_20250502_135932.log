2025-05-02 13:59:32,582 - INFO - [MainThread] [<module>] - ============================================================
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250502_135932.log
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425', '-1002614397019', '-4641852757']
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Chunk Size: 20.0 MB (20971520 bytes)
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Max Upload Workers: 5
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - ============================================================
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-02 13:59:32,583 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-02 13:59:32,590 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-02 13:59:32,590 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-02 13:59:32,590 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-02 13:59:32,591 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-02 13:59:32,759 - INFO - [MainThread] [<module>] - Database module initialized.
2025-05-02 13:59:33,264 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-05-02 13:59:33,268 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-05-02 13:59:33,274 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-05-02 13:59:33,274 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-05-02 13:59:33,297 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-05-02 13:59:33,304 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-05-02 13:59:34,109 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 13:59:34] "GET /login HTTP/1.1" 200 -
2025-05-02 14:00:51,978 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:00:51] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 14:00:51,983 - INFO - [Thread-5 (process_request_thread)] [index] - Serving index page.
2025-05-02 14:00:52,011 - INFO - [Thread-5 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:00:52] "GET / HTTP/1.1" 200 -
2025-05-02 14:01:26,298 - INFO - [Thread-6 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:01:26] "GET /login HTTP/1.1" 200 -
2025-05-02 14:01:30,398 - INFO - [Thread-8 (process_request_thread)] [show_register_page] - Serving registration page.
2025-05-02 14:01:30,403 - INFO - [Thread-8 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:01:30] "GET /register HTTP/1.1" 200 -
2025-05-02 14:01:57,984 - INFO - [Thread-7 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:01:57] "GET /login HTTP/1.1" 200 -
2025-05-02 14:05:36,789 - INFO - [Thread-11 (process_request_thread)] [show_register_page] - Serving registration page.
2025-05-02 14:05:36,790 - INFO - [Thread-11 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:05:36] "GET /register HTTP/1.1" 200 -
2025-05-02 14:06:45,329 - INFO - [Thread-13 (process_request_thread)] [register_user] - Received registration request.
2025-05-02 14:06:45,329 - INFO - [Thread-13 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.6armfs2.mongodb.net...
2025-05-02 14:06:46,119 - INFO - [Thread-13 (process_request_thread)] [_connect_to_db] - âœ… Successfully connected and pinged MongoDB Atlas!
2025-05-02 14:06:46,119 - INFO - [Thread-13 (process_request_thread)] [get_db] - Accessed database: Telegrambot
2025-05-02 14:06:46,119 - INFO - [Thread-13 (process_request_thread)] [get_userinfo_collection] - Accessed collection: userinfo
2025-05-02 14:06:46,148 - INFO - [Thread-13 (process_request_thread)] [find_user_by_email] - No user record found for email: hbmpc1@gmail.com
2025-05-02 14:06:47,019 - INFO - [Thread-13 (process_request_thread)] [save_user] - Successfully inserted new user with ID: 6814841e25d83715b7fc5722
2025-05-02 14:06:47,024 - INFO - [Thread-13 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:06:47] "[35m[1mPOST /register HTTP/1.1[0m" 201 -
2025-05-02 14:07:08,635 - INFO - [Thread-15 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:07:08] "GET /login HTTP/1.1" 200 -
2025-05-02 14:07:17,836 - INFO - [Thread-17 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:07:17] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 14:07:17,839 - INFO - [Thread-16 (process_request_thread)] [index] - Serving index page.
2025-05-02 14:07:17,840 - INFO - [Thread-16 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:07:17] "GET / HTTP/1.1" 200 -
2025-05-02 14:07:49,418 - INFO - [Thread-18 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:07:49] "GET /login HTTP/1.1" 200 -
2025-05-02 14:08:52,073 - INFO - [Thread-21 (process_request_thread)] [show_register_page] - Serving registration page.
2025-05-02 14:08:52,073 - INFO - [Thread-21 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:08:52] "GET /register HTTP/1.1" 200 -
2025-05-02 14:09:19,933 - INFO - [Thread-22 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:19] "GET /login HTTP/1.1" 200 -
2025-05-02 14:09:28,156 - INFO - [Thread-23 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:28] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 14:09:28,162 - INFO - [Thread-24 (process_request_thread)] [index] - Serving index page.
2025-05-02 14:09:28,164 - INFO - [Thread-24 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:28] "GET / HTTP/1.1" 200 -
2025-05-02 14:09:32,183 - INFO - [Thread-25 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:32] "GET /login HTTP/1.1" 200 -
2025-05-02 14:09:39,355 - INFO - [Thread-27 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:39] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 14:09:39,362 - INFO - [Thread-26 (process_request_thread)] [index] - Serving index page.
2025-05-02 14:09:39,364 - INFO - [Thread-26 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:39] "GET / HTTP/1.1" 200 -
2025-05-02 14:09:50,878 - INFO - [Thread-28 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-02 14:09:50,879 - INFO - [Thread-28 (process_request_thread)] [initiate_upload] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Temp storage: uploads_temp\43b78914-14dd-45c2-acae-15d85a6ca8f7_image (12).png
2025-05-02 14:09:50,879 - INFO - [Thread-28 (process_request_thread)] [initiate_upload] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Temp saved: 'image (12).png'.
2025-05-02 14:09:50,879 - INFO - [Thread-28 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:50] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-02 14:09:50,893 - INFO - [Thread-29 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 43b78914-14dd-45c2-acae-15d85a6ca8f7
2025-05-02 14:09:50,893 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Starting processing generator...
2025-05-02 14:09:50,894 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Processing: User='admin', File='image (12).png'
2025-05-02 14:09:50,894 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Initialized Upload Executor (max=5)
2025-05-02 14:09:50,894 - INFO - [Thread-29 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:50] "GET /stream-progress/43b78914-14dd-45c2-acae-15d85a6ca8f7 HTTP/1.1" 200 -
2025-05-02 14:09:50,895 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Access ID: 5ef1165fee
2025-05-02 14:09:50,896 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Single file workflow.
2025-05-02 14:09:50,911 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Compressed size: 81577
2025-05-02 14:09:50,912 - INFO - [Upload_43b7_0] [_send_single_file_task] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] T> Sending 'image (12).zip' (81577b) to -4603853425
2025-05-02 14:09:50,913 - INFO - [Upload_43b7_1] [_send_single_file_task] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] T> Sending 'image (12).zip' (81577b) to -1002614397019
2025-05-02 14:09:50,913 - INFO - [Upload_43b7_0] [send_file_to_telegram] - [ChatID -4603853425, File 'image (12).zip'] Attempting send.
2025-05-02 14:09:50,913 - INFO - [Upload_43b7_2] [_send_single_file_task] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] T> Sending 'image (12).zip' (81577b) to -4641852757
2025-05-02 14:09:50,913 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Submitted 3 single-file tasks.
2025-05-02 14:09:50,914 - INFO - [Upload_43b7_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'image (12).zip'] Attempting send.
2025-05-02 14:09:50,914 - INFO - [Upload_43b7_2] [send_file_to_telegram] - [ChatID -4641852757, File 'image (12).zip'] Attempting send.
2025-05-02 14:09:50,915 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Wait primary (-4603853425)...
2025-05-02 14:09:52,655 - INFO - [Upload_43b7_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 14:09:52,656 - INFO - [Upload_43b7_2] [send_file_to_telegram] - [ChatID -4641852757, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 14:09:52,656 - INFO - [Upload_43b7_1] [_send_single_file_task] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] T> Sent 'image (12).zip' to -1002614397019. Success: True
2025-05-02 14:09:52,656 - INFO - [Upload_43b7_2] [_send_single_file_task] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] T> Sent 'image (12).zip' to -4641852757. Success: True
2025-05-02 14:09:52,673 - INFO - [Upload_43b7_0] [send_file_to_telegram] - [ChatID -4603853425, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 14:09:52,673 - INFO - [Upload_43b7_0] [_send_single_file_task] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] T> Sent 'image (12).zip' to -4603853425. Success: True
2025-05-02 14:09:52,673 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Primary done. OK:True
2025-05-02 14:09:52,674 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Wait backups...
2025-05-02 14:09:52,674 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Single sends done in 1.76s.
2025-05-02 14:09:52,677 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Success: 3/3
2025-05-02 14:09:52,678 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Attempting to save metadata to DB...
2025-05-02 14:09:52,679 - ERROR - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Upload failed: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\routes.py", line 390, in process_upload_and_generate_updates
    save_success, save_msg = save_file_metadata(record) # Call the DB function
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 142, in save_file_metadata
    collection, error = get_metadata_collection()
                        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 116, in get_metadata_collection
    db_instance, error = get_db()
                         ^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 91, in get_db
    if _db:
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\pymongo\synchronous\database.py", line 342, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-02 14:09:52,683 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Upload generator cleanup.
2025-05-02 14:09:52,684 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Upload executor shutdown.
2025-05-02 14:09:52,685 - INFO - [Thread-29 (process_request_thread)] [_safe_remove_file] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Cleaned up original temp: uploads_temp\43b78914-14dd-45c2-acae-15d85a6ca8f7_image (12).png
2025-05-02 14:09:52,685 - INFO - [Thread-29 (process_request_thread)] [process_upload_and_generate_updates] - [43b78914-14dd-45c2-acae-15d85a6ca8f7] Upload generator finished. Status: error
2025-05-02 14:09:58,200 - INFO - [Thread-30 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:09:58] "GET /login HTTP/1.1" 200 -
2025-05-02 14:10:10,167 - INFO - [Thread-32 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:10:10] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 14:10:10,173 - INFO - [Thread-31 (process_request_thread)] [index] - Serving index page.
2025-05-02 14:10:10,175 - INFO - [Thread-31 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:10:10] "GET / HTTP/1.1" 200 -
2025-05-02 14:10:14,159 - INFO - [Thread-33 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-02 14:10:14,159 - INFO - [Thread-33 (process_request_thread)] [initiate_upload] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Temp storage: uploads_temp\9dc154ca-701d-4204-81ba-a343e0a1eb50_image (12).png
2025-05-02 14:10:14,159 - INFO - [Thread-33 (process_request_thread)] [initiate_upload] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Temp saved: 'image (12).png'.
2025-05-02 14:10:14,159 - INFO - [Thread-33 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:10:14] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-02 14:10:14,169 - INFO - [Thread-34 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 9dc154ca-701d-4204-81ba-a343e0a1eb50
2025-05-02 14:10:14,170 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Starting processing generator...
2025-05-02 14:10:14,170 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Processing: User='admin', File='image (12).png'
2025-05-02 14:10:14,171 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Initialized Upload Executor (max=5)
2025-05-02 14:10:14,172 - INFO - [Thread-34 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 14:10:14] "GET /stream-progress/9dc154ca-701d-4204-81ba-a343e0a1eb50 HTTP/1.1" 200 -
2025-05-02 14:10:14,172 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Access ID: 851d3ce0f7
2025-05-02 14:10:14,172 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Single file workflow.
2025-05-02 14:10:14,189 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Compressed size: 81577
2025-05-02 14:10:14,190 - INFO - [Upload_9dc1_0] [_send_single_file_task] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] T> Sending 'image (12).zip' (81577b) to -4603853425
2025-05-02 14:10:14,191 - INFO - [Upload_9dc1_0] [send_file_to_telegram] - [ChatID -4603853425, File 'image (12).zip'] Attempting send.
2025-05-02 14:10:14,191 - INFO - [Upload_9dc1_1] [_send_single_file_task] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] T> Sending 'image (12).zip' (81577b) to -1002614397019
2025-05-02 14:10:14,193 - INFO - [Upload_9dc1_2] [_send_single_file_task] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] T> Sending 'image (12).zip' (81577b) to -4641852757
2025-05-02 14:10:14,193 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Submitted 3 single-file tasks.
2025-05-02 14:10:14,193 - INFO - [Upload_9dc1_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'image (12).zip'] Attempting send.
2025-05-02 14:10:14,193 - INFO - [Upload_9dc1_2] [send_file_to_telegram] - [ChatID -4641852757, File 'image (12).zip'] Attempting send.
2025-05-02 14:10:14,193 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Wait primary (-4603853425)...
2025-05-02 14:10:14,856 - INFO - [Upload_9dc1_2] [send_file_to_telegram] - [ChatID -4641852757, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 14:10:14,857 - INFO - [Upload_9dc1_2] [_send_single_file_task] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] T> Sent 'image (12).zip' to -4641852757. Success: True
2025-05-02 14:10:15,303 - INFO - [Upload_9dc1_0] [send_file_to_telegram] - [ChatID -4603853425, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 14:10:15,304 - INFO - [Upload_9dc1_0] [_send_single_file_task] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] T> Sent 'image (12).zip' to -4603853425. Success: True
2025-05-02 14:10:15,304 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Primary done. OK:True
2025-05-02 14:10:15,304 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Wait backups...
2025-05-02 14:10:15,356 - INFO - [Upload_9dc1_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 14:10:15,356 - INFO - [Upload_9dc1_1] [_send_single_file_task] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] T> Sent 'image (12).zip' to -1002614397019. Success: True
2025-05-02 14:10:15,357 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Single sends done in 1.17s.
2025-05-02 14:10:15,357 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Success: 3/3
2025-05-02 14:10:15,358 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Attempting to save metadata to DB...
2025-05-02 14:10:15,358 - ERROR - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Upload failed: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\routes.py", line 390, in process_upload_and_generate_updates
    save_success, save_msg = save_file_metadata(record) # Call the DB function
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 142, in save_file_metadata
    collection, error = get_metadata_collection()
                        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 116, in get_metadata_collection
    db_instance, error = get_db()
                         ^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 91, in get_db
    if _db:
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\pymongo\synchronous\database.py", line 342, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-02 14:10:15,362 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Upload generator cleanup.
2025-05-02 14:10:15,363 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Upload executor shutdown.
2025-05-02 14:10:15,364 - INFO - [Thread-34 (process_request_thread)] [_safe_remove_file] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Cleaned up original temp: uploads_temp\9dc154ca-701d-4204-81ba-a343e0a1eb50_image (12).png
2025-05-02 14:10:15,364 - INFO - [Thread-34 (process_request_thread)] [process_upload_and_generate_updates] - [9dc154ca-701d-4204-81ba-a343e0a1eb50] Upload generator finished. Status: error
