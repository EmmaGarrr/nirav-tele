2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - ============================================================
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250501_091054.log
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425']
2025-05-01 09:10:54,409 - WARNING - [MainThread] [format_bytes] - Error formatting bytes (20971520): name 'math' is not defined
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Chunk Size: 20971520 B (20971520 bytes)
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Max Upload Workers: 3
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - ============================================================
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-05-01 09:10:54,409 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-01 09:10:54,424 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-01 09:10:54,424 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-01 09:10:54,424 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-01 09:10:54,426 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-01 09:10:54,427 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-01 09:10:54,427 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-01 09:10:54,427 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-01 09:10:54,580 - INFO - [MainThread] [<module>] - Database module initialized.
2025-05-01 09:10:54,999 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-05-01 09:10:54,999 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-05-01 09:10:55,015 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-05-01 09:10:55,016 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-05-01 09:10:55,040 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-05-01 09:10:55,044 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-05-01 09:11:00,293 - INFO - [Thread-3 (process_request_thread)] [index] - Serving index page.
2025-05-01 09:11:00,372 - INFO - [Thread-3 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:11:00] "GET / HTTP/1.1" 200 -
2025-05-01 09:11:00,436 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:11:00] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-05-01 09:11:09,459 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-01 09:11:09,459 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Temp storage: uploads_temp\b4f0c9a7-c842-4fd7-9016-08d9d96433fa_gitattributes (2) (1)
2025-05-01 09:11:09,459 - INFO - [Thread-4 (process_request_thread)] [initiate_upload] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Temp saved: 'gitattributes (2) (1)'.
2025-05-01 09:11:09,459 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:11:09] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-01 09:11:09,471 - INFO - [Thread-5 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: b4f0c9a7-c842-4fd7-9016-08d9d96433fa
2025-05-01 09:11:09,474 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Starting processing generator...
2025-05-01 09:11:09,475 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Processing: User='Octopus', File='gitattributes (2) (1)'
2025-05-01 09:11:09,475 - INFO - [Thread-5 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:11:09] "GET /stream-progress/b4f0c9a7-c842-4fd7-9016-08d9d96433fa HTTP/1.1" 200 -
2025-05-01 09:11:09,476 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Access ID: 7aa150fbb9
2025-05-01 09:11:09,476 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Single file workflow.
2025-05-01 09:11:09,487 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Compressed size: 202
2025-05-01 09:11:09,488 - INFO - [Thread-5 (process_request_thread)] [_send_single_file_task] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] T> Sending 'gitattributes (2) (1).zip' (202b) to -4603853425
2025-05-01 09:11:09,490 - INFO - [Thread-5 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'gitattributes (2) (1).zip'] Attempting send.
2025-05-01 09:11:11,462 - INFO - [Thread-5 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'gitattributes (2) (1).zip'] API success (Attempt 1).
2025-05-01 09:11:11,462 - INFO - [Thread-5 (process_request_thread)] [_send_single_file_task] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] T> Sent 'gitattributes (2) (1).zip' to -4603853425. Success: True
2025-05-01 09:11:11,462 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Single sends done in 1.97s.
2025-05-01 09:11:11,462 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Success: 1/1
2025-05-01 09:11:11,462 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Attempting to save metadata to DB...
2025-05-01 09:11:11,466 - INFO - [Thread-5 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.sfoz7jc.mongodb.net...
2025-05-01 09:11:13,959 - ERROR - [Thread-5 (process_request_thread)] [_connect_to_db] - MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:11:13,959 - ERROR - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] CRITICAL: Metadata save to DB failed: Failed to get collection: MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:11:13,959 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Upload generator cleanup.
2025-05-01 09:11:13,968 - INFO - [Thread-5 (process_request_thread)] [_safe_remove_file] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Cleaned up original temp: uploads_temp\b4f0c9a7-c842-4fd7-9016-08d9d96433fa_gitattributes (2) (1)
2025-05-01 09:11:13,969 - INFO - [Thread-5 (process_request_thread)] [process_upload_and_generate_updates] - [b4f0c9a7-c842-4fd7-9016-08d9d96433fa] Upload generator finished. Status: processing
2025-05-01 09:14:48,312 - INFO - [Thread-6 (process_request_thread)] [list_user_files] - List files request for: 'Octopus'
2025-05-01 09:14:48,312 - INFO - [Thread-6 (process_request_thread)] [list_user_files] - Fetching files for user 'Octopus' from DB...
2025-05-01 09:14:48,312 - INFO - [Thread-6 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.sfoz7jc.mongodb.net...
2025-05-01 09:14:48,800 - ERROR - [Thread-6 (process_request_thread)] [_connect_to_db] - MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:14:48,800 - ERROR - [Thread-6 (process_request_thread)] [list_user_files] - DB Error listing files for 'Octopus': Failed to get collection: MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:14:48,800 - INFO - [Thread-6 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:14:48] "GET /files/Octopus HTTP/1.1" 200 -
2025-05-01 09:14:50,459 - INFO - [Thread-7 (process_request_thread)] [list_user_files] - List files request for: 'Octopus'
2025-05-01 09:14:50,459 - INFO - [Thread-7 (process_request_thread)] [list_user_files] - Fetching files for user 'Octopus' from DB...
2025-05-01 09:14:50,459 - INFO - [Thread-7 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.sfoz7jc.mongodb.net...
2025-05-01 09:14:50,736 - ERROR - [Thread-7 (process_request_thread)] [_connect_to_db] - MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:14:50,738 - ERROR - [Thread-7 (process_request_thread)] [list_user_files] - DB Error listing files for 'Octopus': Failed to get collection: MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:14:50,740 - INFO - [Thread-7 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:14:50] "GET /files/Octopus HTTP/1.1" 200 -
2025-05-01 09:15:07,621 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-01 09:15:07,621 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Temp storage: uploads_temp\3cdda873-7724-49fa-85f6-0e40931bbf2f_gitattributes (2) (1)
2025-05-01 09:15:07,621 - INFO - [Thread-8 (process_request_thread)] [initiate_upload] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Temp saved: 'gitattributes (2) (1)'.
2025-05-01 09:15:07,621 - INFO - [Thread-8 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:15:07] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-01 09:15:07,621 - INFO - [Thread-9 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 3cdda873-7724-49fa-85f6-0e40931bbf2f
2025-05-01 09:15:07,621 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Starting processing generator...
2025-05-01 09:15:07,633 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Processing: User='Octopus', File='gitattributes (2) (1)'
2025-05-01 09:15:07,633 - INFO - [Thread-9 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:15:07] "GET /stream-progress/3cdda873-7724-49fa-85f6-0e40931bbf2f HTTP/1.1" 200 -
2025-05-01 09:15:07,634 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Access ID: 26ff2f7709
2025-05-01 09:15:07,635 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Single file workflow.
2025-05-01 09:15:07,644 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Compressed size: 202
2025-05-01 09:15:07,644 - INFO - [Thread-9 (process_request_thread)] [_send_single_file_task] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] T> Sending 'gitattributes (2) (1).zip' (202b) to -4603853425
2025-05-01 09:15:07,644 - INFO - [Thread-9 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'gitattributes (2) (1).zip'] Attempting send.
2025-05-01 09:15:08,139 - INFO - [Thread-9 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'gitattributes (2) (1).zip'] API success (Attempt 1).
2025-05-01 09:15:08,139 - INFO - [Thread-9 (process_request_thread)] [_send_single_file_task] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] T> Sent 'gitattributes (2) (1).zip' to -4603853425. Success: True
2025-05-01 09:15:08,139 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Single sends done in 0.49s.
2025-05-01 09:15:08,139 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Success: 1/1
2025-05-01 09:15:08,139 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Attempting to save metadata to DB...
2025-05-01 09:15:08,148 - INFO - [Thread-9 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.sfoz7jc.mongodb.net...
2025-05-01 09:15:08,479 - ERROR - [Thread-9 (process_request_thread)] [_connect_to_db] - MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:15:08,479 - ERROR - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] CRITICAL: Metadata save to DB failed: Failed to get collection: MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:15:08,479 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Upload generator cleanup.
2025-05-01 09:15:08,485 - INFO - [Thread-9 (process_request_thread)] [_safe_remove_file] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Cleaned up original temp: uploads_temp\3cdda873-7724-49fa-85f6-0e40931bbf2f_gitattributes (2) (1)
2025-05-01 09:15:08,486 - INFO - [Thread-9 (process_request_thread)] [process_upload_and_generate_updates] - [3cdda873-7724-49fa-85f6-0e40931bbf2f] Upload generator finished. Status: processing
2025-05-01 09:15:25,983 - INFO - [Thread-10 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-01 09:15:25,988 - INFO - [Thread-10 (process_request_thread)] [initiate_upload] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Temp storage: uploads_temp\044ac56b-9bc8-40b9-b982-3f3b02a2ad59_gitattributes (2) (1)
2025-05-01 09:15:25,988 - INFO - [Thread-10 (process_request_thread)] [initiate_upload] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Temp saved: 'gitattributes (2) (1)'.
2025-05-01 09:15:25,988 - INFO - [Thread-10 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:15:25] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-01 09:15:25,998 - INFO - [Thread-11 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 044ac56b-9bc8-40b9-b982-3f3b02a2ad59
2025-05-01 09:15:25,999 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Starting processing generator...
2025-05-01 09:15:26,000 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Processing: User='Octopus', File='gitattributes (2) (1)'
2025-05-01 09:15:26,000 - INFO - [Thread-11 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 09:15:26] "GET /stream-progress/044ac56b-9bc8-40b9-b982-3f3b02a2ad59 HTTP/1.1" 200 -
2025-05-01 09:15:26,000 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Access ID: 6a75e6f525
2025-05-01 09:15:26,000 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Single file workflow.
2025-05-01 09:15:26,006 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Compressed size: 202
2025-05-01 09:15:26,008 - INFO - [Thread-11 (process_request_thread)] [_send_single_file_task] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] T> Sending 'gitattributes (2) (1).zip' (202b) to -4603853425
2025-05-01 09:15:26,008 - INFO - [Thread-11 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'gitattributes (2) (1).zip'] Attempting send.
2025-05-01 09:15:26,778 - INFO - [Thread-11 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'gitattributes (2) (1).zip'] API success (Attempt 1).
2025-05-01 09:15:26,778 - INFO - [Thread-11 (process_request_thread)] [_send_single_file_task] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] T> Sent 'gitattributes (2) (1).zip' to -4603853425. Success: True
2025-05-01 09:15:26,779 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Single sends done in 0.77s.
2025-05-01 09:15:26,780 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Success: 1/1
2025-05-01 09:15:26,781 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Attempting to save metadata to DB...
2025-05-01 09:15:26,783 - INFO - [Thread-11 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.sfoz7jc.mongodb.net...
2025-05-01 09:15:27,191 - ERROR - [Thread-11 (process_request_thread)] [_connect_to_db] - MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:15:27,191 - ERROR - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] CRITICAL: Metadata save to DB failed: Failed to get collection: MongoDB Operation Failure (Auth/Permissions?): bad auth : Authentication failed., full error: {'ok': 0, 'errmsg': 'bad auth : Authentication failed.', 'code': 8000, 'codeName': 'AtlasError'}
2025-05-01 09:15:27,192 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Upload generator cleanup.
2025-05-01 09:15:27,193 - INFO - [Thread-11 (process_request_thread)] [_safe_remove_file] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Cleaned up original temp: uploads_temp\044ac56b-9bc8-40b9-b982-3f3b02a2ad59_gitattributes (2) (1)
2025-05-01 09:15:27,193 - INFO - [Thread-11 (process_request_thread)] [process_upload_and_generate_updates] - [044ac56b-9bc8-40b9-b982-3f3b02a2ad59] Upload generator finished. Status: processing
