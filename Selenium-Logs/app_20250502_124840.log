2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - ============================================================
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250502_124840.log
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425', '-1002614397019', '-4641852757']
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - Chunk Size: 20.0 MB (20971520 bytes)
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - Max Upload Workers: 5
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - ============================================================
2025-05-02 12:48:40,063 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-05-02 12:48:40,073 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-02 12:48:40,073 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-02 12:48:40,073 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-02 12:48:40,073 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-02 12:48:40,077 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-02 12:48:40,077 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-02 12:48:40,078 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-02 12:48:40,078 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-02 12:48:40,253 - INFO - [MainThread] [<module>] - Database module initialized.
2025-05-02 12:48:40,723 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-05-02 12:48:40,723 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-05-02 12:48:40,733 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-05-02 12:48:40,733 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-05-02 12:48:40,756 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-05-02 12:48:40,763 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-05-02 12:48:44,663 - INFO - [Thread-2 (process_request_thread)] [index] - Serving index page.
2025-05-02 12:48:44,682 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:48:44] "GET / HTTP/1.1" 200 -
2025-05-02 12:48:46,043 - INFO - [Thread-3 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:48:46] "GET /login HTTP/1.1" 200 -
2025-05-02 12:48:56,374 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:48:56] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 12:48:56,381 - INFO - [Thread-5 (process_request_thread)] [index] - Serving index page.
2025-05-02 12:48:56,383 - INFO - [Thread-5 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:48:56] "GET / HTTP/1.1" 200 -
2025-05-02 12:49:56,663 - INFO - [Thread-7 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-02 12:50:14,683 - INFO - [Thread-7 (process_request_thread)] [initiate_upload] - [153dd257-22a8-41b5-98cf-badbf3384d05] Temp storage: uploads_temp\153dd257-22a8-41b5-98cf-badbf3384d05_ScreamingFrogSEOSpider-20.3 (1).exe
2025-05-02 12:50:18,053 - INFO - [Thread-7 (process_request_thread)] [initiate_upload] - [153dd257-22a8-41b5-98cf-badbf3384d05] Temp saved: 'ScreamingFrogSEOSpider-20.3 (1).exe'.
2025-05-02 12:50:18,108 - INFO - [Thread-7 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:18] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-02 12:50:18,118 - INFO - [Thread-8 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 153dd257-22a8-41b5-98cf-badbf3384d05
2025-05-02 12:50:18,123 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Starting processing generator...
2025-05-02 12:50:18,123 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Processing: User='admin', File='ScreamingFrogSEOSpider-20.3 (1).exe'
2025-05-02 12:50:18,123 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Initialized Upload Executor (max=5)
2025-05-02 12:50:18,123 - INFO - [Thread-8 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:18] "GET /stream-progress/153dd257-22a8-41b5-98cf-badbf3384d05 HTTP/1.1" 200 -
2025-05-02 12:50:18,128 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Access ID: 985e5dd12b
2025-05-02 12:50:18,128 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Large file workflow.
2025-05-02 12:50:37,051 - INFO - [Thread-9 (process_request_thread)] [index] - Serving index page.
2025-05-02 12:50:37,052 - INFO - [Thread-9 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:37] "GET / HTTP/1.1" 200 -
2025-05-02 12:50:38,671 - INFO - [Thread-10 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:38] "GET /login HTTP/1.1" 200 -
2025-05-02 12:50:42,485 - INFO - [Thread-12 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:42] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 12:50:42,491 - INFO - [Thread-11 (process_request_thread)] [index] - Serving index page.
2025-05-02 12:50:42,493 - INFO - [Thread-11 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:42] "GET / HTTP/1.1" 200 -
2025-05-02 12:50:43,137 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Compressed to 654609783 bytes in 25.01s.
2025-05-02 12:50:43,141 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Upload generator cleanup.
2025-05-02 12:50:43,141 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Upload executor shutdown.
2025-05-02 12:50:43,198 - INFO - [Thread-8 (process_request_thread)] [_safe_remove_file] - [153dd257-22a8-41b5-98cf-badbf3384d05] Cleaned up original temp: uploads_temp\153dd257-22a8-41b5-98cf-badbf3384d05_ScreamingFrogSEOSpider-20.3 (1).exe
2025-05-02 12:50:43,198 - INFO - [Thread-8 (process_request_thread)] [process_upload_and_generate_updates] - [153dd257-22a8-41b5-98cf-badbf3384d05] Upload generator finished. Status: processing
2025-05-02 12:50:51,353 - INFO - [Thread-13 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-02 12:50:51,353 - INFO - [Thread-13 (process_request_thread)] [initiate_upload] - [40793c37-cf08-4c11-b546-fff71b3b8949] Temp storage: uploads_temp\40793c37-cf08-4c11-b546-fff71b3b8949_bot (2) (1).py
2025-05-02 12:50:51,353 - INFO - [Thread-13 (process_request_thread)] [initiate_upload] - [40793c37-cf08-4c11-b546-fff71b3b8949] Temp saved: 'bot (2) (1).py'.
2025-05-02 12:50:51,358 - INFO - [Thread-13 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:51] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-02 12:50:51,364 - INFO - [Thread-14 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 40793c37-cf08-4c11-b546-fff71b3b8949
2025-05-02 12:50:51,365 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Starting processing generator...
2025-05-02 12:50:51,365 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Processing: User='admin', File='bot (2) (1).py'
2025-05-02 12:50:51,365 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Initialized Upload Executor (max=5)
2025-05-02 12:50:51,365 - INFO - [Thread-14 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:50:51] "GET /stream-progress/40793c37-cf08-4c11-b546-fff71b3b8949 HTTP/1.1" 200 -
2025-05-02 12:50:51,365 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Access ID: 123773f5d6
2025-05-02 12:50:51,365 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Single file workflow.
2025-05-02 12:50:51,373 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Compressed size: 1088
2025-05-02 12:50:51,373 - INFO - [Upload_4079_0] [_send_single_file_task] - [40793c37-cf08-4c11-b546-fff71b3b8949] T> Sending 'bot (2) (1).zip' (1088b) to -4603853425
2025-05-02 12:50:51,373 - INFO - [Upload_4079_1] [_send_single_file_task] - [40793c37-cf08-4c11-b546-fff71b3b8949] T> Sending 'bot (2) (1).zip' (1088b) to -1002614397019
2025-05-02 12:50:51,373 - INFO - [Upload_4079_0] [send_file_to_telegram] - [ChatID -4603853425, File 'bot (2) (1).zip'] Attempting send.
2025-05-02 12:50:51,373 - INFO - [Upload_4079_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'bot (2) (1).zip'] Attempting send.
2025-05-02 12:50:51,373 - INFO - [Upload_4079_2] [_send_single_file_task] - [40793c37-cf08-4c11-b546-fff71b3b8949] T> Sending 'bot (2) (1).zip' (1088b) to -4641852757
2025-05-02 12:50:51,373 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Submitted 3 single-file tasks.
2025-05-02 12:50:51,388 - INFO - [Upload_4079_2] [send_file_to_telegram] - [ChatID -4641852757, File 'bot (2) (1).zip'] Attempting send.
2025-05-02 12:50:51,388 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Wait primary (-4603853425)...
2025-05-02 12:50:52,359 - INFO - [Upload_4079_2] [send_file_to_telegram] - [ChatID -4641852757, File 'bot (2) (1).zip'] API success (Attempt 1).
2025-05-02 12:50:52,360 - INFO - [Upload_4079_0] [send_file_to_telegram] - [ChatID -4603853425, File 'bot (2) (1).zip'] API success (Attempt 1).
2025-05-02 12:50:52,360 - INFO - [Upload_4079_2] [_send_single_file_task] - [40793c37-cf08-4c11-b546-fff71b3b8949] T> Sent 'bot (2) (1).zip' to -4641852757. Success: True
2025-05-02 12:50:52,361 - INFO - [Upload_4079_0] [_send_single_file_task] - [40793c37-cf08-4c11-b546-fff71b3b8949] T> Sent 'bot (2) (1).zip' to -4603853425. Success: True
2025-05-02 12:50:52,362 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Primary done. OK:True
2025-05-02 12:50:52,363 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Wait backups...
2025-05-02 12:50:52,393 - INFO - [Upload_4079_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'bot (2) (1).zip'] API success (Attempt 1).
2025-05-02 12:50:52,398 - INFO - [Upload_4079_1] [_send_single_file_task] - [40793c37-cf08-4c11-b546-fff71b3b8949] T> Sent 'bot (2) (1).zip' to -1002614397019. Success: True
2025-05-02 12:50:52,399 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Single sends done in 1.03s.
2025-05-02 12:50:52,402 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Success: 3/3
2025-05-02 12:50:52,403 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Attempting to save metadata to DB...
2025-05-02 12:50:52,405 - INFO - [Thread-14 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.6armfs2.mongodb.net...
2025-05-02 12:50:54,183 - INFO - [Thread-14 (process_request_thread)] [_connect_to_db] - ✅ Successfully connected and pinged MongoDB Atlas!
2025-05-02 12:50:54,184 - INFO - [Thread-14 (process_request_thread)] [get_db] - Accessed database: Telegrambot
2025-05-02 12:50:54,184 - INFO - [Thread-14 (process_request_thread)] [get_metadata_collection] - Accessed collection: user_files
2025-05-02 12:50:54,224 - INFO - [Thread-14 (process_request_thread)] [save_file_metadata] - Successfully inserted metadata for access_id: 123773f5d6
2025-05-02 12:50:54,224 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Metadata successfully saved to DB. Msg: Metadata inserted (ID: 681472561969d4a304aec224).
2025-05-02 12:50:54,226 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Upload generator cleanup.
2025-05-02 12:50:54,226 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Upload executor shutdown.
2025-05-02 12:50:54,228 - INFO - [Thread-14 (process_request_thread)] [_safe_remove_file] - [40793c37-cf08-4c11-b546-fff71b3b8949] Cleaned up original temp: uploads_temp\40793c37-cf08-4c11-b546-fff71b3b8949_bot (2) (1).py
2025-05-02 12:50:54,228 - INFO - [Thread-14 (process_request_thread)] [process_upload_and_generate_updates] - [40793c37-cf08-4c11-b546-fff71b3b8949] Upload generator finished. Status: completed
2025-05-02 12:51:01,454 - INFO - [Thread-15 (process_request_thread)] [list_user_files] - List files request for: 'admin'
2025-05-02 12:51:01,454 - INFO - [Thread-15 (process_request_thread)] [list_user_files] - Fetching files for user 'admin' from DB...
2025-05-02 12:51:01,484 - INFO - [Thread-15 (process_request_thread)] [find_metadata_by_username] - Found 8 metadata records for username: admin
2025-05-02 12:51:01,488 - INFO - [Thread-15 (process_request_thread)] [list_user_files] - Found 8 records for 'admin'.
2025-05-02 12:51:01,488 - INFO - [Thread-15 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:51:01] "GET /files/admin HTTP/1.1" 200 -
2025-05-02 12:51:13,265 - INFO - [Thread-16 (process_request_thread)] [show_register_page] - Serving registration page.
2025-05-02 12:51:13,279 - INFO - [Thread-16 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:51:13] "GET /register HTTP/1.1" 200 -
2025-05-02 12:51:33,834 - INFO - [Thread-19 (process_request_thread)] [register_user] - Received registration request.
2025-05-02 12:51:33,834 - ERROR - [Thread-19 (process_request_thread)] [register_user] - Registration error: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\routes.py", line 93, in register_user
    existing_user, error = find_user_by_email(email)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 330, in find_user_by_email
    collection, error = get_userinfo_collection()
                        ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 306, in get_userinfo_collection
    db_instance, error = get_db() # Reuse existing DB connection function
                         ^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\database.py", line 91, in get_db
    if _db:
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\pymongo\synchronous\database.py", line 342, in __bool__
    raise NotImplementedError(
NotImplementedError: Database objects do not implement truth value testing or bool(). Please compare with None instead: database is not None
2025-05-02 12:51:33,843 - INFO - [Thread-19 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:51:33] "[35m[1mPOST /register HTTP/1.1[0m" 500 -
2025-05-02 12:58:51,804 - INFO - [Thread-22 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:58:51] "GET /login HTTP/1.1" 200 -
2025-05-02 12:59:12,495 - INFO - [Thread-23 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-05-02 12:59:12,495 - INFO - [Thread-23 (process_request_thread)] [initiate_upload] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Temp storage: uploads_temp\20945642-25c1-49f9-b0c4-e64f6279b81c_image (12).png
2025-05-02 12:59:12,495 - INFO - [Thread-23 (process_request_thread)] [initiate_upload] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Temp saved: 'image (12).png'.
2025-05-02 12:59:12,500 - INFO - [Thread-23 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:59:12] "POST /initiate-upload HTTP/1.1" 200 -
2025-05-02 12:59:12,513 - INFO - [Thread-24 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: 20945642-25c1-49f9-b0c4-e64f6279b81c
2025-05-02 12:59:12,514 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Starting processing generator...
2025-05-02 12:59:12,514 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Processing: User='admin', File='image (12).png'
2025-05-02 12:59:12,516 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Initialized Upload Executor (max=5)
2025-05-02 12:59:12,517 - INFO - [Thread-24 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:59:12] "GET /stream-progress/20945642-25c1-49f9-b0c4-e64f6279b81c HTTP/1.1" 200 -
2025-05-02 12:59:12,517 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Access ID: 2aae01ee72
2025-05-02 12:59:12,518 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Single file workflow.
2025-05-02 12:59:12,537 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Compressed size: 81577
2025-05-02 12:59:12,538 - INFO - [Upload_2094_0] [_send_single_file_task] - [20945642-25c1-49f9-b0c4-e64f6279b81c] T> Sending 'image (12).zip' (81577b) to -4603853425
2025-05-02 12:59:12,538 - INFO - [Upload_2094_0] [send_file_to_telegram] - [ChatID -4603853425, File 'image (12).zip'] Attempting send.
2025-05-02 12:59:12,538 - INFO - [Upload_2094_1] [_send_single_file_task] - [20945642-25c1-49f9-b0c4-e64f6279b81c] T> Sending 'image (12).zip' (81577b) to -1002614397019
2025-05-02 12:59:12,538 - INFO - [Upload_2094_2] [_send_single_file_task] - [20945642-25c1-49f9-b0c4-e64f6279b81c] T> Sending 'image (12).zip' (81577b) to -4641852757
2025-05-02 12:59:12,543 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Submitted 3 single-file tasks.
2025-05-02 12:59:12,544 - INFO - [Upload_2094_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'image (12).zip'] Attempting send.
2025-05-02 12:59:12,544 - INFO - [Upload_2094_2] [send_file_to_telegram] - [ChatID -4641852757, File 'image (12).zip'] Attempting send.
2025-05-02 12:59:12,551 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Wait primary (-4603853425)...
2025-05-02 12:59:13,941 - INFO - [Upload_2094_0] [send_file_to_telegram] - [ChatID -4603853425, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 12:59:13,942 - INFO - [Upload_2094_0] [_send_single_file_task] - [20945642-25c1-49f9-b0c4-e64f6279b81c] T> Sent 'image (12).zip' to -4603853425. Success: True
2025-05-02 12:59:13,942 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Primary done. OK:True
2025-05-02 12:59:13,942 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Wait backups...
2025-05-02 12:59:13,947 - INFO - [Upload_2094_2] [send_file_to_telegram] - [ChatID -4641852757, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 12:59:13,947 - INFO - [Upload_2094_2] [_send_single_file_task] - [20945642-25c1-49f9-b0c4-e64f6279b81c] T> Sent 'image (12).zip' to -4641852757. Success: True
2025-05-02 12:59:13,958 - INFO - [Upload_2094_1] [send_file_to_telegram] - [ChatID -1002614397019, File 'image (12).zip'] API success (Attempt 1).
2025-05-02 12:59:13,958 - INFO - [Upload_2094_1] [_send_single_file_task] - [20945642-25c1-49f9-b0c4-e64f6279b81c] T> Sent 'image (12).zip' to -1002614397019. Success: True
2025-05-02 12:59:13,959 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Single sends done in 1.42s.
2025-05-02 12:59:13,959 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Success: 3/3
2025-05-02 12:59:13,960 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Attempting to save metadata to DB...
2025-05-02 12:59:14,019 - INFO - [Thread-24 (process_request_thread)] [save_file_metadata] - Successfully inserted metadata for access_id: 2aae01ee72
2025-05-02 12:59:14,020 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Metadata successfully saved to DB. Msg: Metadata inserted (ID: 6814744a1969d4a304aec24b).
2025-05-02 12:59:14,020 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Upload generator cleanup.
2025-05-02 12:59:14,021 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Upload executor shutdown.
2025-05-02 12:59:14,022 - INFO - [Thread-24 (process_request_thread)] [_safe_remove_file] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Cleaned up original temp: uploads_temp\20945642-25c1-49f9-b0c4-e64f6279b81c_image (12).png
2025-05-02 12:59:14,022 - INFO - [Thread-24 (process_request_thread)] [process_upload_and_generate_updates] - [20945642-25c1-49f9-b0c4-e64f6279b81c] Upload generator finished. Status: completed
2025-05-02 12:59:50,608 - INFO - [Thread-25 (process_request_thread)] [get_file_by_access_id] - Request dl page via access_id: 2aae01ee72
2025-05-02 12:59:50,611 - INFO - [Thread-25 (process_request_thread)] [get_file_by_access_id] - Looking up access_id '2aae01ee72' in DB...
2025-05-02 12:59:50,639 - INFO - [Thread-25 (process_request_thread)] [find_metadata_by_access_id] - Found metadata record for access_id: 2aae01ee72
2025-05-02 12:59:50,646 - INFO - [Thread-25 (process_request_thread)] [get_file_by_access_id] - Rendering dl page for 'image (12).png' (id: 2aae01ee72).
2025-05-02 12:59:50,680 - INFO - [Thread-25 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:59:50] "GET /get/2aae01ee72 HTTP/1.1" 200 -
2025-05-02 12:59:52,559 - INFO - [Thread-26 (process_request_thread)] [stream_download_by_access_id] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] SSE connection request for dl prep via access_id: 2aae01ee72
2025-05-02 12:59:52,585 - INFO - [Thread-26 (process_request_thread)] [find_metadata_by_access_id] - Found metadata record for access_id: 2aae01ee72
2025-05-02 12:59:52,585 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Download prep generator started.
2025-05-02 12:59:52,585 - INFO - [Thread-26 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:59:52] "GET /stream-download/2aae01ee72 HTTP/1.1" 200 -
2025-05-02 12:59:52,716 - INFO - [Thread-26 (process_request_thread)] [find_metadata_by_access_id] - Found metadata record for access_id: 2aae01ee72
2025-05-02 12:59:52,716 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Successfully found metadata for download preparation.
2025-05-02 12:59:52,716 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Meta: 'image (12).png', User:admin, Size:84979, Split:False, Comp:True
2025-05-02 12:59:52,921 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Preparing non-split file.
2025-05-02 12:59:52,921 - WARNING - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Comp size missing single.
2025-05-02 12:59:52,923 - INFO - [Thread-26 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIGT2gUdEnY9HlXx1oIa4m0gVdt9wOvAAJFFQACkvGpVKP_mvZ0K0MeNgQ] Attempting download.
2025-05-02 12:59:53,856 - INFO - [Thread-26 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIGT2gUdEnY9HlXx1oIa4m0gVdt9wOvAAJFFQACkvGpVKP_mvZ0K0MeNgQ] Got DL URL (Attempt 1): https://api.telegram.org/file/bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/documents/file_646.zip
2025-05-02 12:59:53,856 - INFO - [Thread-26 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIGT2gUdEnY9HlXx1oIa4m0gVdt9wOvAAJFFQACkvGpVKP_mvZ0K0MeNgQ] Attempting content download from URL.
2025-05-02 12:59:54,260 - INFO - [Thread-26 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIGT2gUdEnY9HlXx1oIa4m0gVdt9wOvAAJFFQACkvGpVKP_mvZ0K0MeNgQ] Downloaded 81577 bytes (Attempt 1).
2025-05-02 12:59:54,260 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] TG dl (81577 bytes) in 1.34s. Avg Speed: 0.06 MB/s
2025-05-02 12:59:54,273 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Final file ready: 'E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\dl_final_94f70eb7-0827-4a4c-b3bd-68d5ac0b1063_6vm50mh_', Size: 84979.
2025-05-02 12:59:54,376 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Prep complete. Sent 'ready'.
2025-05-02 12:59:54,377 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Download prep generator cleanup.
2025-05-02 12:59:54,379 - INFO - [Thread-26 (process_request_thread)] [_prepare_download_and_generate_updates] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Download prep generator task ended.
2025-05-02 12:59:54,389 - INFO - [Thread-27 (process_request_thread)] [serve_temp_file] - Request serve temp file ID: 94f70eb7-0827-4a4c-b3bd-68d5ac0b1063, Filename: image (12).png
2025-05-02 12:59:54,390 - INFO - [Thread-27 (process_request_thread)] [serve_temp_file] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Preparing streaming response for 'image (12).png'.
2025-05-02 12:59:54,392 - INFO - [Thread-27 (process_request_thread)] [generate_stream] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Scheduled cleanup in 120s for path: E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\dl_final_94f70eb7-0827-4a4c-b3bd-68d5ac0b1063_6vm50mh_
2025-05-02 12:59:54,402 - INFO - [Thread-27 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 12:59:54] "GET /serve-temp-file/94f70eb7-0827-4a4c-b3bd-68d5ac0b1063/image%20(12).png HTTP/1.1" 200 -
2025-05-02 12:59:54,403 - INFO - [Thread-27 (process_request_thread)] [generate_stream] - [94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Finished streaming file.
2025-05-02 13:00:04,043 - INFO - [Thread-28 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 13:00:04] "GET /login HTTP/1.1" 200 -
2025-05-02 13:00:34,126 - INFO - [Thread-31 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 13:00:34] "[32mPOST /login HTTP/1.1[0m" 302 -
2025-05-02 13:00:34,135 - INFO - [Thread-30 (process_request_thread)] [index] - Serving index page.
2025-05-02 13:00:34,142 - INFO - [Thread-30 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 13:00:34] "GET / HTTP/1.1" 200 -
2025-05-02 13:00:38,527 - INFO - [Thread-32 (process_request_thread)] [show_register_page] - Serving registration page.
2025-05-02 13:00:38,528 - INFO - [Thread-32 (process_request_thread)] [_log] - 127.0.0.1 - - [02/May/2025 13:00:38] "GET /register HTTP/1.1" 200 -
2025-05-02 13:55:02,559 - INFO - [Thread-29] [_schedule_cleanup] - [Cleanup-94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Scheduled cleanup executing for path: E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\dl_final_94f70eb7-0827-4a4c-b3bd-68d5ac0b1063_6vm50mh_
2025-05-02 13:55:02,559 - INFO - [Thread-29] [_safe_remove_file] - [Cleanup-94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Cleaned up final dl: E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\dl_final_94f70eb7-0827-4a4c-b3bd-68d5ac0b1063_6vm50mh_
2025-05-02 13:55:02,559 - INFO - [Thread-29] [_schedule_cleanup] - [Cleanup-94f70eb7-0827-4a4c-b3bd-68d5ac0b1063] Prep data removed.
