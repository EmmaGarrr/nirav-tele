2025-04-29 16:01:39,708 - INFO - [MainThread] [<module>] - ============================================================
2025-04-29 16:01:39,709 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250429_160139.log
2025-04-29 16:01:39,709 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-04-29 16:01:39,710 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425']
2025-04-29 16:01:39,710 - INFO - [MainThread] [<module>] - Chunk Size: 51380224 bytes
2025-04-29 16:01:39,710 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-04-29 16:01:39,711 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-04-29 16:01:39,712 - INFO - [MainThread] [<module>] - Max Upload Workers: 3
2025-04-29 16:01:39,712 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-04-29 16:01:39,712 - INFO - [MainThread] [<module>] - ============================================================
2025-04-29 16:01:39,712 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-04-29 16:01:39,713 - INFO - [MainThread] [<module>] - Utility functions defined.
2025-04-29 16:01:39,716 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-04-29 16:01:39,716 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-04-29 16:01:39,716 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-04-29 16:01:39,717 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-04-29 16:01:39,719 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-04-29 16:01:39,719 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-04-29 16:01:39,720 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-04-29 16:01:39,720 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-04-29 16:01:40,204 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-04-29 16:01:40,205 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-04-29 16:01:40,209 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-04-29 16:01:40,210 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-04-29 16:01:40,243 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-04-29 16:01:40,255 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-04-29 16:01:42,896 - INFO - [Thread-2 (process_request_thread)] [index] - Serving index page.
2025-04-29 16:01:42,986 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [29/Apr/2025 16:01:42] "GET / HTTP/1.1" 200 -
2025-04-29 16:01:51,779 - INFO - [Thread-3 (process_request_thread)] [initiate_upload] - Request initiate upload.
2025-04-29 16:01:52,913 - INFO - [Thread-3 (process_request_thread)] [initiate_upload] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Temp storage: uploads_temp\c7f54ea5-aa27-4042-8275-9200d42d9b9a_WindsurfUserSetup-x64-1.7.1 (1).exe
2025-04-29 16:01:53,221 - INFO - [Thread-3 (process_request_thread)] [initiate_upload] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Temp saved: 'WindsurfUserSetup-x64-1.7.1 (1).exe'.
2025-04-29 16:01:53,234 - INFO - [Thread-3 (process_request_thread)] [_log] - 127.0.0.1 - - [29/Apr/2025 16:01:53] "POST /initiate-upload HTTP/1.1" 200 -
2025-04-29 16:01:53,240 - INFO - [Thread-4 (process_request_thread)] [stream_progress] - SSE connect request for upload_id: c7f54ea5-aa27-4042-8275-9200d42d9b9a
2025-04-29 16:01:53,244 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Starting processing generator...
2025-04-29 16:01:53,333 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Processing: User='ELENA', File='WindsurfUserSetup-x64-1.7.1 (1).exe'
2025-04-29 16:01:53,441 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [29/Apr/2025 16:01:53] "GET /stream-progress/c7f54ea5-aa27-4042-8275-9200d42d9b9a HTTP/1.1" 200 -
2025-04-29 16:01:53,442 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Access ID: 0ceed4a64a
2025-04-29 16:01:53,443 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Large file workflow.
2025-04-29 16:01:58,073 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Compressed to 136492940 bytes in 4.62s.
2025-04-29 16:01:58,132 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Read chunk 1 (51380224 bytes). Name: 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'
2025-04-29 16:01:58,132 - INFO - [Thread-4 (process_request_thread)] [_send_chunk_task] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] T> Sending chunk 1 ('WindsurfUserSetup-x64-1.7.1 (1).zip.part_001') to -4603853425
2025-04-29 16:01:58,133 - INFO - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Attempting send.
2025-04-29 16:02:08,556 - WARNING - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Connection error attempt 1: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))
2025-04-29 16:02:08,558 - INFO - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Retrying in 2s...
2025-04-29 16:02:20,921 - WARNING - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Connection error attempt 2: ('Connection aborted.', TimeoutError('The write operation timed out'))
2025-04-29 16:02:20,922 - INFO - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Retrying in 2s...
2025-04-29 16:02:33,288 - WARNING - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Connection error attempt 3: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))
2025-04-29 16:02:33,289 - INFO - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Retrying in 2s...
2025-04-29 16:02:45,632 - WARNING - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Connection error attempt 4: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))
2025-04-29 16:02:45,633 - ERROR - [Thread-4 (process_request_thread)] [send_file_to_telegram] - [ChatID -4603853425, File 'WindsurfUserSetup-x64-1.7.1 (1).zip.part_001'] Send failed after 4 attempts.
urllib3.exceptions.SSLError: The operation did not complete (write) (_ssl.c:2427)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\urllib3\connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\urllib3\util\retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\telegram_api.py", line 51, in send_file_to_telegram
    response = session.post(
               ^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\sessions.py", line 637, in post
    return self.request("POST", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Telegram_tool\Telegram_Bot_Tool\.venv\Lib\site-packages\requests\adapters.py", line 698, in send
    raise SSLError(e, request=request)
requests.exceptions.SSLError: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))
2025-04-29 16:02:45,788 - INFO - [Thread-4 (process_request_thread)] [_send_chunk_task] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] T> Sent chunk 1 to -4603853425. Success: False
2025-04-29 16:02:45,799 - INFO - [Thread-4 (process_request_thread)] [_safe_remove_file] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Cleaned up large compressed temp: E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\c7f54ea5-aa27-4042-8275-9200d42d9b9a_comp_p920v33n.zip
2025-04-29 16:02:45,799 - ERROR - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Upload failed: Primary fail chunk 1: Failed after multiple attempts: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))
Traceback (most recent call last):
  File "E:\Telegram_tool\Telegram_Bot_Tool\routes.py", line 308, in process_upload_and_generate_updates
    if cid == str(PRIMARY_TELEGRAM_CHAT_ID) and not res[0]: raise IOError(f"Primary fail chunk {chunk_num}: {res[1]}")
                                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: Primary fail chunk 1: Failed after multiple attempts: HTTPSConnectionPool(host='api.telegram.org', port=443): Max retries exceeded with url: /bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/sendDocument (Caused by SSLError(SSLWantWriteError(3, 'The operation did not complete (write) (_ssl.c:2427)')))
2025-04-29 16:02:45,802 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Upload generator cleanup.
2025-04-29 16:02:45,816 - INFO - [Thread-4 (process_request_thread)] [_safe_remove_file] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Cleaned up original temp: uploads_temp\c7f54ea5-aa27-4042-8275-9200d42d9b9a_WindsurfUserSetup-x64-1.7.1 (1).exe
2025-04-29 16:02:45,816 - INFO - [Thread-4 (process_request_thread)] [process_upload_and_generate_updates] - [c7f54ea5-aa27-4042-8275-9200d42d9b9a] Upload generator finished. Status: error
