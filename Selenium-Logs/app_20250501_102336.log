2025-05-01 10:23:36,330 - INFO - [MainThread] [<module>] - ============================================================
2025-05-01 10:23:36,331 - INFO - [MainThread] [<module>] - Logging configured. Level: INFO. Log file: Selenium-Logs\app_20250501_102336.log
2025-05-01 10:23:36,331 - INFO - [MainThread] [<module>] - Primary Chat ID: -4603853425
2025-05-01 10:23:36,331 - INFO - [MainThread] [<module>] - All Target Chat IDs: ['-4603853425']
2025-05-01 10:23:36,332 - WARNING - [MainThread] [format_bytes] - Error formatting bytes (20971520): name 'math' is not defined
2025-05-01 10:23:36,332 - INFO - [MainThread] [<module>] - Chunk Size: 20971520 B (20971520 bytes)
2025-05-01 10:23:36,332 - INFO - [MainThread] [<module>] - API Timeouts (Connect/Read): 10s / 60s
2025-05-01 10:23:36,333 - INFO - [MainThread] [<module>] - API Retries: 3 attempts, 2s delay
2025-05-01 10:23:36,333 - INFO - [MainThread] [<module>] - Max Upload Workers: 3
2025-05-01 10:23:36,334 - INFO - [MainThread] [<module>] - Max Download Workers: 12
2025-05-01 10:23:36,334 - INFO - [MainThread] [<module>] - ============================================================
2025-05-01 10:23:36,334 - INFO - [MainThread] [<module>] - Configuration loaded successfully.
2025-05-01 10:23:36,335 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-01 10:23:36,336 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-01 10:23:36,336 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-01 10:23:36,336 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-01 10:23:36,338 - INFO - [MainThread] [<module>] - Custom Jinja filter 'format_bytes' registered.
2025-05-01 10:23:36,338 - INFO - [MainThread] [<module>] - Flask-CORS initialized. Allowing origins: http://localhost:4200
2025-05-01 10:23:36,339 - INFO - [MainThread] [<module>] - Flask application initialized.
2025-05-01 10:23:36,339 - INFO - [MainThread] [<module>] - Global state variables initialized (upload_progress_data, download_prep_data).
2025-05-01 10:23:36,501 - INFO - [MainThread] [<module>] - Database module initialized.
2025-05-01 10:23:36,938 - INFO - [MainThread] [<module>] - Initialized requests.Session for Telegram API calls.
2025-05-01 10:23:36,939 - INFO - [MainThread] [<module>] - Telegram API functions defined with Session and Retries.
2025-05-01 10:23:36,943 - INFO - [MainThread] [<module>] - Flask routes defined using configurable workers and linter fixes.
2025-05-01 10:23:36,944 - INFO - [MainThread] [<module>] - Starting Flask development server...
2025-05-01 10:23:36,965 - WARNING - [MainThread] [_log] -  * Debugger is active!
2025-05-01 10:23:36,970 - INFO - [MainThread] [_log] -  * Debugger PIN: 107-410-311
2025-05-01 10:23:41,007 - INFO - [Thread-3 (process_request_thread)] [index] - Serving index page.
2025-05-01 10:23:41,048 - INFO - [Thread-3 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 10:23:41] "GET / HTTP/1.1" 200 -
2025-05-01 10:23:50,192 - INFO - [Thread-2 (process_request_thread)] [list_user_files] - List files request for: 'ELENA'
2025-05-01 10:23:50,192 - INFO - [Thread-2 (process_request_thread)] [list_user_files] - Fetching files for user 'ELENA' from DB...
2025-05-01 10:23:50,193 - INFO - [Thread-2 (process_request_thread)] [_connect_to_db] - Attempting to connect to MongoDB Atlas host: telegrambot.6armfs2.mongodb.net...
2025-05-01 10:23:50,952 - INFO - [Thread-2 (process_request_thread)] [_connect_to_db] - âœ… Successfully connected and pinged MongoDB Atlas!
2025-05-01 10:23:50,953 - INFO - [Thread-2 (process_request_thread)] [get_db] - Accessed database: Telegrambot
2025-05-01 10:23:50,954 - INFO - [Thread-2 (process_request_thread)] [get_metadata_collection] - Accessed collection: file_metadata
2025-05-01 10:23:50,982 - INFO - [Thread-2 (process_request_thread)] [find_metadata_by_username] - Found 1 metadata records for username: ELENA
2025-05-01 10:23:50,983 - INFO - [Thread-2 (process_request_thread)] [list_user_files] - Found 1 records for 'ELENA'.
2025-05-01 10:23:50,985 - INFO - [Thread-2 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 10:23:50] "GET /files/ELENA HTTP/1.1" 200 -
2025-05-01 10:23:52,491 - INFO - [Thread-4 (process_request_thread)] [prepare_download_stream] - [d4363904-dc07-42ed-851c-142bedc95dcd] SSE download prep request: User='ELENA', File='requirements.txt'
2025-05-01 10:23:52,492 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Download prep generator started.
2025-05-01 10:23:52,492 - INFO - [Thread-4 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 10:23:52] "GET /prepare-download/ELENA/requirements.txt HTTP/1.1" 200 -
2025-05-01 10:23:52,618 - INFO - [Thread-4 (process_request_thread)] [find_metadata_by_username] - Found 1 metadata records for username: ELENA
2025-05-01 10:23:52,618 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Successfully found metadata for download preparation.
2025-05-01 10:23:52,618 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Meta: 'requirements.txt', User:ELENA, Size:207, Split:False, Comp:True
2025-05-01 10:23:52,820 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Preparing non-split file.
2025-05-01 10:23:52,822 - WARNING - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Comp size missing single.
2025-05-01 10:23:52,823 - INFO - [Thread-4 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIFJ2gS9Zxbth4OC0m_46iRb80FNfHOAAJDFgACkvGZVBga0n2R_ewcNgQ] Attempting download.
2025-05-01 10:23:53,647 - INFO - [Thread-4 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIFJ2gS9Zxbth4OC0m_46iRb80FNfHOAAJDFgACkvGZVBga0n2R_ewcNgQ] Got DL URL (Attempt 1): https://api.telegram.org/file/bot7812479394:AAFrzOcHGKfc-1iOUbVEkptJkooaJrXHAxs/documents/file_555.zip
2025-05-01 10:23:53,648 - INFO - [Thread-4 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIFJ2gS9Zxbth4OC0m_46iRb80FNfHOAAJDFgACkvGZVBga0n2R_ewcNgQ] Attempting content download from URL.
2025-05-01 10:23:53,789 - INFO - [Thread-4 (process_request_thread)] [download_telegram_file_content] - [FileID BQACAgUAAxkDAAIFJ2gS9Zxbth4OC0m_46iRb80FNfHOAAJDFgACkvGZVBga0n2R_ewcNgQ] Downloaded 255 bytes (Attempt 1).
2025-05-01 10:23:53,790 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] TG dl (255 bytes) in 0.97s. Avg Speed: 0.00 MB/s
2025-05-01 10:23:53,811 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Final file ready: 'E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\dl_final_d4363904-dc07-42ed-851c-142bedc95dcd_shtp5inz', Size: 207.
2025-05-01 10:23:53,917 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Prep complete. Sent 'ready'.
2025-05-01 10:23:53,918 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Download prep generator cleanup.
2025-05-01 10:23:53,925 - INFO - [Thread-4 (process_request_thread)] [_prepare_download_and_generate_updates] - [d4363904-dc07-42ed-851c-142bedc95dcd] Download prep generator task ended.
2025-05-01 10:23:53,935 - INFO - [Thread-5 (process_request_thread)] [serve_temp_file] - Request serve temp file ID: d4363904-dc07-42ed-851c-142bedc95dcd, Filename: requirements.txt
2025-05-01 10:23:53,939 - INFO - [Thread-5 (process_request_thread)] [serve_temp_file] - [d4363904-dc07-42ed-851c-142bedc95dcd] Preparing streaming response for 'requirements.txt'.
2025-05-01 10:23:53,944 - INFO - [Thread-5 (process_request_thread)] [generate_stream] - [d4363904-dc07-42ed-851c-142bedc95dcd] Scheduled cleanup in 120s for path: E:\Telegram_tool\Telegram_Bot_Tool\uploads_temp\dl_final_d4363904-dc07-42ed-851c-142bedc95dcd_shtp5inz
2025-05-01 10:23:53,947 - INFO - [Thread-5 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 10:23:53] "GET /serve-temp-file/d4363904-dc07-42ed-851c-142bedc95dcd/requirements.txt HTTP/1.1" 200 -
2025-05-01 10:23:53,947 - INFO - [Thread-5 (process_request_thread)] [generate_stream] - [d4363904-dc07-42ed-851c-142bedc95dcd] Finished streaming file.
2025-05-01 10:24:21,646 - INFO - [Thread-8 (process_request_thread)] [list_user_files] - List files request for: 'ELENA'
2025-05-01 10:24:21,646 - INFO - [Thread-8 (process_request_thread)] [list_user_files] - Fetching files for user 'ELENA' from DB...
2025-05-01 10:24:21,672 - INFO - [Thread-8 (process_request_thread)] [find_metadata_by_username] - Found 1 metadata records for username: ELENA
2025-05-01 10:24:21,672 - INFO - [Thread-8 (process_request_thread)] [list_user_files] - Found 1 records for 'ELENA'.
2025-05-01 10:24:21,673 - INFO - [Thread-8 (process_request_thread)] [_log] - 127.0.0.1 - - [01/May/2025 10:24:21] "GET /files/ELENA HTTP/1.1" 200 -
